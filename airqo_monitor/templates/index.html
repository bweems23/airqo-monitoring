<!DOCTYPE html>
<html>
  <head>
    <style>
    .wrapper {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      grid-gap: 10px;
    }

    .malfunctioning_block {
        background-color: #ffced3;
        margin-left: 5px;
        position: relative;
        margin-bottom: 5px;
        float: left;
        height: 100%;
    }

    .low_reporting_frequency_block {
        background-color: #ffface;
        margin-left: 5px;
        position: relative;
        margin-bottom: 5px;
        float: left;
        height: 100%;
    }

    .functioning_block {
        background-color: #d3ffce;
        margin-left: 5px;
        position: relative;
        margin-bottom: 5px;
        float: left;
        height: 100%;
    }

    .update_data_button {
        -moz-box-shadow:inset 0px 1px 3px 0px #91b8b3;
        -webkit-box-shadow:inset 0px 1px 3px 0px #91b8b3;
        box-shadow:inset 0px 1px 3px 0px #91b8b3;
        background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #768d87), color-stop(1, #6c7c7c));
        background:-moz-linear-gradient(top, #768d87 5%, #6c7c7c 100%);
        background:-webkit-linear-gradient(top, #768d87 5%, #6c7c7c 100%);
        background:-o-linear-gradient(top, #768d87 5%, #6c7c7c 100%);
        background:-ms-linear-gradient(top, #768d87 5%, #6c7c7c 100%);
        background:linear-gradient(to bottom, #768d87 5%, #6c7c7c 100%);
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#768d87', endColorstr='#6c7c7c',GradientType=0);
        background-color:#768d87;
        -moz-border-radius:5px;
        -webkit-border-radius:5px;
        border-radius:5px;
        border:1px solid #566963;
        display:inline-block;
        cursor:pointer;
        color:#ffffff;
        font-family:Arial;
        font-size:15px;
        font-weight:bold;
        padding:11px 23px;
        text-decoration:none;
        text-shadow:0px -1px 0px #2b665e;
    }
    .update_data_button:hover {
        background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #6c7c7c), color-stop(1, #768d87));
        background:-moz-linear-gradient(top, #6c7c7c 5%, #768d87 100%);
        background:-webkit-linear-gradient(top, #6c7c7c 5%, #768d87 100%);
        background:-o-linear-gradient(top, #6c7c7c 5%, #768d87 100%);
        background:-ms-linear-gradient(top, #6c7c7c 5%, #768d87 100%);
        background:linear-gradient(to bottom, #6c7c7c 5%, #768d87 100%);
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#6c7c7c', endColorstr='#768d87',GradientType=0);
        background-color:#6c7c7c;
    }
    .update_data_button:active {
        position:relative;
        top:1px;
    }

    li {
        display: table-cell;
    }

    ul {
        display: table-row;
    }
    </style>

    <meta charset="utf-8">
    <title>Device Malfunction Monitor</title>
  </head>
  <body>
    <h1 style="text-align:center"> AirQo Device Monitor </h1>

    <center>
      <form action="/update_incidents/", method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input class=update_data_button type="submit" value="Update Channel Data">
        <br/>(this may take a while)
      </form>
    </center>

    <br/><br/>

    <div class="wrapper">
            {% for channel in channels %}
                <div class="{% if channel.active_incidents %} malfunctioning_block {% else %} functioning_block {% endif %};">
                    <p style="text-align:center">
                        <a href="/channels/{{ channel.channel_id }}"><strong>{{ channel.name }}</strong></a>
                    </p>
                    <div style="margin-left:5px;">
                        {% if channel.active_incidents %}
                            <ul style="margin-bottom:0px;">
                                <li>
                                    {% for incident in channel.active_incidents %}
                                        <p> {{ incident.malfunction_reason.description }} </p>
                                    {% endfor %}
                                </li>
                            </ul>
                    {% else %}
                        <p style="text-align:center">Reports look normal.</p>
                    {% endif %}
                </div>
                </div>
            {% endfor %}
    </div>

  </body>
</html>
